<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Latin Declension Trainer</title>
  <style>

    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      width: 100vw;
    }
    .game {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      width: 100%;
      height: 100%;
      text-align: center;
      overflow-y: auto;
    }
    .choices {
      margin-bottom: 1rem;
    }
    .choices button {
      margin: 5px;
      padding: 6px 12px;
      border: 1px solid #aaa;
      border-radius: 8px;
      background: #eee;
      cursor: pointer;
    }
    .choices button.active {
      background: #4caf50;
      color: white;
    }
    input {
      padding: 20px;
      width: 80%;
      margin: 10px 0;
    }
    button.submit {
      padding: 10px 15px;
      margin-top: 10px;
      border: none;
      background: #4caf50;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }
    button.submit:hover {
      background: #45a049;
    }
    .feedback {
      margin-top: 15px;
      font-weight: bold;
    }
    #tables-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin: 0 auto;
    }
    #tables-container table {
      border-collapse: collapse;
      min-width: 200px;
      margin: 0 auto;
      flex: 1 1 calc(30% - 40px);
      font-family: 'Arial', sans-serif;
      border: none;
    }
    #tables-container caption {
      font-weight: bold;
      margin-bottom: 5px;
    }
    #tables-container th,
    #tables-container td {
      padding: 6px 10px;
      text-align: center;
    }
    #performance-msg {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: bold;
      color: #ff9800;
    }
    #stats {
      margin-top: 10px;
      font-size: 1em;
      color: #333;
    }

th, td {
  border: 2px solid #ffb6c1; /* Pastel pink */
  background-color: #f5f5f5;
}

th {
  background-color: #d3e7f3; /* Pastel blue */
  color: #333;
}

table {
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

#toggle {
    padding: 10px 20px;
    size: 10px;
}

  </style>
</head>
<body>
  <div class="game">
    <h2>Latin Declension Trainer</h2>

    <div class="choices" id="choices"></div>

    <p id="performance-msg"></p>
    <p id="stats"></p>

    <p id="question"></p>
    <p id="example"></p>
    <input type="text" id="answer" placeholder="Type your answer..." />
    <p class="feedback" id="feedback"></p>

    <button id="toggle" class="choices">Table</button>
    <div id="tables-container"></div>


  </div>

  <script>
    // Declension tables
const tables = {
  "1st declension": {
    gender: "feminine",
    cases: {
      nominative: {singular: "a",
                   plural: "ae"},
      genitive:   {singular: "ae",
                   plural: "arum"},
      dative:     {singular: "ae",
                   plural: "is"},
      accusative: {singular: "am",
                   plural: "as"},
      ablative:   {singular: "a",
                   plural: "is"},
      vocative:   {singular: "a",
                   plural: "ae"},
    },
    examples: {
      nominative: {singular: "Puella cantat ‚Äì The girl sings",
                   plural: "Puellae cantant ‚Äì The girls sing"},
      genitive:   {singular: "Liber puellae ‚Äì The book of the girl",
                   plural: "Libri puellarum ‚Äì The books of the girls"},
      dative:     {singular: "Do librum puellae ‚Äì I give the book to the girl",
                   plural: "Do libros puellis ‚Äì I give the books to the girls"},
      accusative: {singular: "Video puellam ‚Äì I see the girl",
                   plural: "Video puellas ‚Äì I see the girls"},
      ablative:   {singular: "Cum puella ambulo ‚Äì I walk with the girl",
                   plural: "Cum puellis ambulo ‚Äì I walk with the girls"},
      vocative:   {singular: "Puella, veni! ‚Äì O girl, come!",
                   plural: "Puellae, venite! ‚Äì O girls, come!"},
    }
  },
  "2nd declension (m)": {
    gender: "masculine",
    cases: {
      nominative: {singular: "us",
                   plural: "i"},
      genitive:   {singular: "i",
                   plural: "orum"},
      dative:     {singular: "o",
                   plural: "is"},
      accusative: {singular: "um",
                   plural: "os"},
      ablative:   {singular: "o",
                   plural: "is"},
      vocative:   {singular: "e",
                   plural: "i"},
    },
    examples: {
      nominative: {singular: "Servus laborat ‚Äì The slave works",
                   plural: "Servi laborant ‚Äì The slaves work"},
      genitive:   {singular: "Domus servi ‚Äì The house of the slave",
                   plural: "Domus servorum ‚Äì The houses of the slaves"},
      dative:     {singular: "Donum servo do ‚Äì I give a gift to the slave",
                   plural: "Dona servis do ‚Äì I give gifts to the slaves"},
      accusative: {singular: "Video servum ‚Äì I see the slave",
                   plural: "Video servos ‚Äì I see the slaves"},
      ablative:   {singular: "Cum servo ambulo ‚Äì I walk with the slave",
                   plural: "Cum servis ambulo ‚Äì I walk with the slaves"},
      vocative:   {singular: "Serve, veni! ‚Äì O slave, come!",
                   plural: "Servi, venite! ‚Äì O slaves, come!"},
    }
  },
  "2nd declension (n)": {
    gender: "neuter",
    cases: {
      nominative: {singular: "um",
                   plural: "a"},
      genitive:   {singular: "i",
                   plural: "orum"},
      dative:     {singular: "o",
                   plural: "is"},
      accusative: {singular: "um",
                   plural: "a"},
      ablative:   {singular: "o",
                   plural: "is"},
      vocative:   {singular: "um",
                   plural: "a"},
    },
    examples: {
      nominative: {singular: "Bellum longum est ‚Äì The war is long",
                   plural: "Bella longa sunt ‚Äì The wars are long"},
      genitive:   {singular: "Causa belli ‚Äì The cause of the war",
                   plural: "Causae bellorum ‚Äì The causes of the wars"},
      dative:     {singular: "Signum bello do ‚Äì I give a signal to the war",
                   plural: "Signa bellis do ‚Äì I give signals to the wars"},
      accusative: {singular: "Video bellum ‚Äì I see the war",
                   plural: "Video bella ‚Äì I see the wars"},
      ablative:   {singular: "Cum bello pugno ‚Äì I fight with the war",
                   plural: "Cum bellis pugno ‚Äì I fight with the wars"},
      vocative:   {singular: "Bellum, veniat finis! ‚Äì O war, may the end come!",
                   plural: "Bella, veniatis! ‚Äì O wars, may you come!"},
    }
  },
  "3rd declension": {
    gender: "neuter",
    cases: {
      nominative: {singular: "",
                   plural: ["a", "ia"]},
      genitive:   {singular: "is",
                   plural: ["um", "ium"]},
      dative:     {singular: "i",
                   plural: "ibus"},
      accusative: {singular: "",
                   plural: ["a", "ia"]},
      ablative:   {singular: ["e", "i"],
                   plural: "ibus"},
      vocative:   {singular:"",
                   plural: ["a", "ia"]}
    },
    examples: {
      nominative: {singular: "Nomen est Marcus ‚Äì The name is Marcus",
                   plural: "Nomina sunt multa ‚Äì The names are many"},
      genitive:   {singular: "Pars nominis ‚Äì Part of the name",
                   plural: "Partes nominum ‚Äì Parts of the names"},
      dative:     {singular: "Fidem nomini do ‚Äì I give trust to the name",
                   plural: "Fidem nominibus do ‚Äì I give trust to the names"},
      accusative: {singular: "Nomen audio ‚Äì I hear the name",
                   plural: "Nomina audio ‚Äì I hear the names"},
      ablative:   {singular: "Cum nomine venio ‚Äì I come with the name",
                   plural: "Cum nominibus venio ‚Äì I come with the names"},
      vocative:   {singular: "Nomen, nota! ‚Äì O name, be known!",
                   plural: "Nomina, notamini! ‚Äì O names, be known!"},
    }
  },
  "4th declension (n)": {
    gender: "neuter",
    cases: {
      nominative: {singular: "u",
                   plural: "ua"},
      genitive:   {singular: "us",
                   plural: "uum"},
      dative:     {singular: "u",
                   plural: ["ibus","ubus"]},
      accusative: {singular: "u",
                   plural: "ua"},
      ablative:   {singular: "u",
                   plural: ["ibus","ubus"]},
      vocative:   {singular:"u",
                   plural: "ua"}
    },

    examples: {
      nominative: {singular: "Cornu longum est ‚Äì The horn is long",
                   plural: "Cornua longa sunt ‚Äì The horns are long"},
      genitive:   {singular: "Sonus cornuus ‚Äì The sound of the horn",
                   plural: "Sonus cornuum ‚Äì The sounds of the horns"},
      dative:     {singular: "Donum cornu do ‚Äì I give a gift to the horn",
                   plural: "Dona cornibus do ‚Äì I give gifts to the horns"},
      accusative: {singular: "Cornu video ‚Äì I see the horn",
                   plural: "Cornua video ‚Äì I see the horns"},
      ablative:   {singular: "Cum cornu cano ‚Äì I sing with the horn",
                   plural: "Cum cornibus cano ‚Äì I sing with the horns"},
      vocative:   {singular: "Cornu, cane! ‚Äì O horn, sing!",
                   plural: "Cornua, canite! ‚Äì O horns, sing!"},
    }
  },
  "4th declension (m)": {
    gender: "masculine",
    cases: {
      nominative: {singular: "us",
                   plural: "us"},
      genitive:   {singular: "us",
                   plural: "uum"},
      dative:     {singular: ["ui", "u"],
                   plural: ["ibus","ubus"]},
      accusative: {singular: "um",
                   plural: "us"},
      ablative:   {singular: "u",
                   plural: ["ibus","ubus"]},
      vocative:   {singular:"us",
                   plural: "us"}
    },
    examples: {
      nominative: {singular: "Fructus dulcis est ‚Äì The fruit is sweet",
                   plural: "Fructus dulces sunt ‚Äì The fruits are sweet"},
      genitive:   {singular: "Sapor fructus ‚Äì The taste of the fruit",
                   plural: "Sapores fructuum ‚Äì The tastes of the fruits"},
      dative:     {singular: "Donum fructui do ‚Äì I give a gift to the fruit",
                   plural: "Dona fructibus do ‚Äì I give gifts to the fruits"},
      accusative: {singular: "Fructum edo ‚Äì I eat the fruit",
                   plural: "Fructus edo ‚Äì I eat the fruits"},
      ablative:   {singular: "Cum fructu venio ‚Äì I come with the fruit",
                   plural: "Cum fructibus venio ‚Äì I come with the fruits"},
      vocative:   {singular: "Fructus, cresce! ‚Äì O fruit, grow!",
                   plural: "Fructus, crescite! ‚Äì O fruits, grow!"},
    }
  },
  "5th declension (f)": {
    gender: "feminine",
    cases: {
      nominative: {singular: "es",
                   plural: "es"},
      genitive:   {singular: ["ei", "e"],
                   plural: "erum"},
      dative:     {singular: ["ei", "e"],
                   plural: "ebus"},
      accusative: {singular: "em",
                   plural: "es"},
      ablative:   {singular: "e",
                   plural: "ebus"},
      vocative:   {singular:"es",
                   plural: "es"}
    },
    examples: {
      nominative: {singular: "Res magna est ‚Äì The thing is great",
                   plural: "Res magnae sunt ‚Äì The things are great"},
      genitive:   {singular: "Causa rei ‚Äì The cause of the thing",
                   plural: "Causae rerum ‚Äì The causes of the things"},
      dative:     {singular: "Fidem rei do ‚Äì I give trust to the thing",
                   plural: "Fidem rebus do ‚Äì I give trust to the things"},
      accusative: {singular: "Rem video ‚Äì I see the thing",
                   plural: "Res video ‚Äì I see the things"},
      ablative:   {singular: "Cum re venio ‚Äì I come with the thing",
                   plural: "Cum rebus venio ‚Äì I come with the things"},
      vocative:   {singular: "Res, appare! ‚Äì O thing, appear!",
                   plural: "Res, apparite! ‚Äì O things, appear!"},
    }
  },
};


    let enabled = {};
    Object.keys(tables).forEach(key => enabled[key] = true);

    let currentQuestion = null;
    let questionsAnswered = 0;
    let correctAnswers = 0;
    let reactionTimes = [];
    let startTime = Date.now();



    // Emoji for each case
    function caseEmoji(caseName) {
      switch (caseName.toLowerCase()) {
        case "nominative": return "üë§";   // subject
        case "genitive":   return "üîë";   // possession
        case "dative":     return "üéÅ";   // to/for
        case "accusative": return "üéØ";   // object/goal
        case "ablative":   return "üõ†Ô∏èüö™";   // by/with/from
        case "vocative":   return "üó£Ô∏è";   // calling
        default: return "‚ùì";
      }
    }
    // Emoji for singular vs plural
    function singularPluralEmoji(num) {
      switch (num.toLowerCase()) {
        case "singular": return "1Ô∏è‚É£";
        case "plural":   return "üë•";
        default: return "‚ùì";
      }
    }



    function getRandomQuestion() {
      const paradigms = Object.keys(tables).filter(p => enabled[p]);
      if (paradigms.length === 0) return null;

      const paradigm = paradigms[Math.floor(Math.random() * paradigms.length)];
      const data = tables[paradigm];

      const caseNames = Object.keys(data.cases);
      const c = caseNames[Math.floor(Math.random() * caseNames.length)];
      const num = Math.random() < 0.5 ? "singular" : "plural";

      return {
        q: `${paradigm} (${data.gender}): What is the ${caseEmoji(c)} ${singularPluralEmoji(num)} ${c.toUpperCase()} ${num.toUpperCase()} ending?`,
        a: data.cases[c][num],
        e: data.examples[c][num],
      };
    }

    function loadQuestion() {
      currentQuestion = getRandomQuestion();
      if (!currentQuestion) {
        document.getElementById("question").textContent = "‚ùó Enable at least one table above.";
        return;
      }
      document.getElementById("question").textContent = currentQuestion.q;
      document.getElementById("example").textContent = currentQuestion.e;
      document.getElementById("answer").value = "";
      document.getElementById("feedback").textContent = "";
      document.getElementById("answer").focus();
      startTime = Date.now();
    }

    function isCorrect(userAnswer, correctAnswer) {
      if (typeof correctAnswer === "string") return userAnswer === correctAnswer;
      if (Array.isArray(correctAnswer)) return correctAnswer.includes(userAnswer);
      return false;
    }

    function submitAnswer() {
      if (!currentQuestion) return;

      let userAnswer = document.getElementById("answer").value.trim().toLowerCase();
      let correctAnswer = currentQuestion.a;
      if (typeof correctAnswer === "string") correctAnswer = correctAnswer.toLowerCase();
      else correctAnswer = correctAnswer.map(c => c.toLowerCase());

      const timeTaken = (Date.now() - startTime) / 1000;
      questionsAnswered++;

      if (isCorrect(userAnswer, correctAnswer)) {
        document.getElementById("feedback").textContent = `‚úÖ Correct!`;
        correctAnswers++;
        reactionTimes.push(timeTaken);
        setTimeout(loadQuestion, 800);
      } else {
        document.getElementById("feedback").textContent = `‚ùå Incorrect, try again.`;
        document.getElementById("answer").value = "";
        return;
      }

      updatePerformanceMsg();
    }

    document.getElementById("answer").addEventListener("keypress", function(e) {
      if (e.key === "Enter") {
        submitAnswer();
      }
    });

    function buildChoices() {
      const container = document.getElementById("choices");
      container.innerHTML = "";
      for (let paradigm in tables) {
        const btn = document.createElement("button");
        btn.textContent = paradigm;
        btn.classList.toggle("active", enabled[paradigm]);
        btn.onclick = () => {
          enabled[paradigm] = !enabled[paradigm];
          btn.classList.toggle("active", enabled[paradigm]);
          loadQuestion();
        };
        container.appendChild(btn);
      }
    }

    function updatePerformanceMsg() {
      let msg = "";
      let statsMsg = "";
      if (questionsAnswered > 0) {
        const correctRate = (correctAnswers / questionsAnswered) * 100;
        const avgTime = reactionTimes.reduce((a,b)=>a+b,0) / reactionTimes.length;

        statsMsg = `Correct rate: ${correctRate.toFixed(1)}% | Avg. reaction time: ${avgTime.toFixed(2)}s`;

        if (correctRate >= 100 && avgTime < 2) {
          msg = "üíØ Accuracy Master! Perfect score!";
        } 
        else if (correctRate >= 95) {
          msg = "üåü You're doing great!";
        } 
        else if (correctRate >= 90) {
          msg = "‚úÖ Excellent accuracy!";
        } 
        else if (correctRate >= 80) {
          msg = "üëç Solid work, keep pushing!";
        } 
        else if (correctRate < 50) {
          msg = "üìò Don‚Äôt worry, keep practicing!";
        }

        if (avgTime < 1.5) {
          msg += " ‚ö° Lightning fast!";
        } 
        else if (avgTime < 3) {
          msg += " ‚è±Ô∏è Good pace!";
        } 
        else if (avgTime > 5) {
          msg += " üå± Steady progress, keep focusing!";
        }
      }
      document.getElementById("performance-msg").textContent = msg;
      document.getElementById("stats").textContent = statsMsg;
    }

    // build declension tables
    const container = document.getElementById("tables-container");
    container.style.display = "none";

    function formatValue(value) {
      if (Array.isArray(value)) {
        return value.join(" / ");
      }
      return value || "‚Äî";
    }

    for (const [declension, data] of Object.entries(tables)) {
      const table = document.createElement("table");

      const caption = document.createElement("caption");
      caption.textContent = `${declension} (${data.gender})`;
      table.appendChild(caption);

      const thead = document.createElement("thead");
      thead.innerHTML = `
        <tr>
          <th>Case</th>
          <th>Singular</th>
          <th>Plural</th>
        </tr>
      `;
      table.appendChild(thead);

      const tbody = document.createElement("tbody");
      for (const [caseName, forms] of Object.entries(data.cases)) {
        const row = document.createElement("tr");

        const caseCell = document.createElement("td");
        caseCell.textContent = caseName.charAt(0).toUpperCase() + caseName.slice(1);
        row.appendChild(caseCell);

        const singularCell = document.createElement("td");
        singularCell.textContent = formatValue(forms.singular);
        row.appendChild(singularCell);

        const pluralCell = document.createElement("td");
        pluralCell.textContent = formatValue(forms.plural);
        row.appendChild(pluralCell);

        tbody.appendChild(row);
      }
      table.appendChild(tbody);

      container.appendChild(table);
    }

    const toggleBtn = document.getElementById("toggle")
    let tableToggled = false
    toggleBtn.addEventListener("click", () => {
        tableToggled = !tableToggled;
        container.style.display = tableToggled ? "flex" : "none";
    });

    buildChoices();
    loadQuestion();
  </script>
</body>
</html>

